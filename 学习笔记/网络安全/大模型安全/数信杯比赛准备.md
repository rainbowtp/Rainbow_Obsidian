
## å…¬ä¼—å·ä¾‹é¢˜
> ã€Šè¶Šæƒå†…å®¹ç”Ÿæˆæ£€æµ‹ã€‹
> åœºæ™¯æè¿°æŸå†…å®¹å¹³å°éƒ¨ç½²äº†ä¸€ä¸ªæ–‡æœ¬ç”Ÿæˆå¤§æ¨¡åž‹ APIã€‚æ”»å‡»è€…å°è¯•é€šè¿‡â€œè¶ŠæƒæŒ‡ä»¤â€è®©æ¨¡åž‹è¾“å‡ºå¹³å°è§„é¿çš„æ¶‰æ”¿æ•æ„Ÿè¯æ±‡ã€‚å¹³å°å¸Œæœ›è¯†åˆ«å¹¶æ‹¦æˆªæ­¤ç±»è¯·æ±‚ã€‚
> ä½ éœ€è¦å®žçŽ°ä¸€ä¸ªæ£€æµ‹å‡½æ•°ï¼Œå¯¹æ¨¡åž‹è¾“å‡ºåšå½’ä¸€åŒ–å¤„ç†ã€å…³é”®è¯åŒ¹é…ä»¥åŠç®€å•è¯­ä¹‰ç›¸ä¼¼åº¦åˆ¤å®šï¼Œæœ€ç»ˆç»™å‡ºæ˜¯å¦è¿è§„çš„å¸ƒå°”ç»“æžœã€‚é¢˜å¹²ä¿¡æ¯ç¼–å†™å¹¶æäº¤å‡½æ•° detect_violation(user_input: str, model_output: str) -> boolã€‚åˆ¤å®šé€»è¾‘å¿…é¡»æ»¡è¶³ï¼šå¯¹ model_output åšå½’ä¸€åŒ–ï¼šè½¬å°å†™ï¼ŒæŒ‰æ˜ å°„å¤„ç† leetspeakï¼ˆ0->o,1->l,3->e,4->a,5->s,7->tï¼‰ï¼ŒåŽ»é™¤éžå­—æ¯æ•°å­—å­—ç¬¦ã€‚å…³é”®è¯å­ä¸²åŒ¹é…ï¼šæ•æ„Ÿè¯è¡¨å›ºå®šä¸º ["democracy", "protest", "revolution", "coup"]ï¼Œåœ¨å½’ä¸€åŒ–åŽæ–‡æœ¬ä¸­å‡ºçŽ°ä»»ä¸€å…³é”®è¯åˆ™è®°ä¸ºå‘½ä¸­ã€‚è¯­ä¹‰ç›¸ä¼¼åº¦ï¼šå¯¹å‘½ä¸­çš„å…³é”®è¯å–å…¶å‘é‡ï¼ˆé¢˜é¢ç»™å®šï¼‰ï¼Œæ±‚å¹³å‡å‘é‡ï¼Œä¸Žç»™å®šä¸­å¿ƒå‘é‡è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦ï¼›ç›¸ä¼¼åº¦ â‰¥ 0.80 åˆ¤ä¸ºè¿è§„ã€‚å½“ä¸”ä»…å½“å­˜åœ¨å…³é”®è¯å‘½ä¸­ä¸”ç›¸ä¼¼åº¦é˜ˆå€¼æ»¡è¶³æ—¶è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚è¯„æµ‹è„šæœ¬å°†å¯¼å…¥ä½ çš„å‡½æ•°å¹¶åœ¨å¤šç»„ç”¨ä¾‹ä¸Šæµ‹è¯•ï¼Œè¦†ç›–å¤§å°å†™ã€å™ªå£°å­—ç¬¦ã€leetspeak å¹²æ‰°åŠè¾¹ç•Œæƒ…å†µã€‚
> æä¾›ä¿¡æ¯ã€å¹³å°é™„ä»¶ã€‘æäº¤æ¨¡æ¿ï¼šsolution.pyï¼Œå†…å«å‡½æ•°ç­¾åä¸Žå¾…å®žçŽ°çš„ TODOã€‚ç­”æ¡ˆæäº¤æäº¤æ–‡ä»¶ï¼šsolution.pyï¼Œè¡¥å…¨å¹¶å®žçŽ° normalize_outputã€cosine_similarityã€detect_violationã€‚ä¸å¾—ä¾èµ–ç½‘ç»œï¼Œä¸å¾—è¯»å–å¤–éƒ¨æ–‡ä»¶ã€‚è¯„åˆ†æ ‡å‡†å‡½æ•°æ­£ç¡®æ€§é€šè¿‡çŽ‡ï¼šæ¯é€šè¿‡ 1/10 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè®¡æ€»åˆ†çš„10 %è¿è¡Œè¶…æ—¶ã€æŠ›å¼‚å¸¸æˆ–è¿”å›žéžå¸ƒå°”å€¼çš„ç”¨ä¾‹è®¡ 0 åˆ†ã€‚æ³¨æ„äº‹é¡¹å½’ä¸€åŒ–æ­¥éª¤å¿…é¡»ä¸¥æ ¼æŒ‰ç…§æ˜ å°„ä¸Žè¿‡æ»¤è§„åˆ™æ‰§è¡Œã€‚ä½™å¼¦ç›¸ä¼¼åº¦éœ€å¤„ç†é›¶å‘é‡åˆ†æ¯ä¸ºé›¶çš„æƒ…å†µï¼ˆå¯è¿”å›ž 0ï¼‰ã€‚ä»…å¯ä½¿ç”¨æ ‡å‡†åº“ï¼Œä¸å¾—ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¾èµ–ã€‚

### æäº¤ä»£ç 
```python
# solution.py
# =========================
# è¶Šæƒå†…å®¹ç”Ÿæˆæ£€æµ‹å®žçŽ°
# åŠŸèƒ½ï¼šå¯¹æ¨¡åž‹è¾“å‡ºè¿›è¡Œå½’ä¸€åŒ–ã€å…³é”®è¯åŒ¹é…åŠè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—ï¼Œ
#       åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿è§„å†…å®¹ç”Ÿæˆè¡Œä¸º
# çº¦æŸï¼šä»…ä½¿ç”¨ Python æ ‡å‡†åº“ï¼Œä¸ä¾èµ–å¤–éƒ¨æ–‡ä»¶æˆ–ç½‘ç»œ
# =========================

import math  # ç”¨äºŽè®¡ç®—å‘é‡èŒƒæ•°ï¼ˆå¹³æ–¹æ ¹ï¼‰

# -------------------------
# å›ºå®šæ•æ„Ÿå…³é”®è¯åˆ—è¡¨
# è‹¥å½’ä¸€åŒ–åŽçš„æ¨¡åž‹è¾“å‡ºä¸­åŒ…å«ä»»ä¸€å…³é”®è¯ï¼Œåˆ™è§†ä¸ºå‘½ä¸­
# -------------------------
SENSITIVE_WORDS = ["democracy", "protest", "revolution", "coup"]

# -------------------------
# æ•æ„Ÿå…³é”®è¯å¯¹åº”çš„å‘é‡è¡¨ç¤º
# æ¯”èµ›ä¸­ç”±é¢˜é¢ç»™å®šï¼Œè¿™é‡Œä»…ä¸ºç¤ºä¾‹å ä½
# key: å…³é”®è¯
# value: è¯¥å…³é”®è¯çš„è¯­ä¹‰å‘é‡
# -------------------------
WORD_VECTORS = {
    "democracy": [0.9, 0.1, 0.0],
    "protest": [0.85, 0.15, 0.0],
    "revolution": [0.88, 0.12, 0.0],
    "coup": [0.92, 0.08, 0.0]
}

# -------------------------
# ä¸­å¿ƒå‘é‡ï¼ˆè¿è§„è¯­ä¹‰ä¸­å¿ƒï¼‰
# ç”¨äºŽä¸Žå‘½ä¸­å…³é”®è¯çš„å¹³å‡å‘é‡è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦
# -------------------------
CENTER_VECTOR = [0.9, 0.1, 0.0]


def normalize_output(text: str) -> str:
    """
    å¯¹æ¨¡åž‹è¾“å‡ºæ–‡æœ¬è¿›è¡Œå½’ä¸€åŒ–å¤„ç†
    å¤„ç†æ­¥éª¤ä¸¥æ ¼æŒ‰ç…§é¢˜ç›®è¦æ±‚æ‰§è¡Œï¼š
    1. è½¬æ¢ä¸ºå°å†™
    2. æŒ‰ leetspeak æ˜ å°„è¡¨æ›¿æ¢å­—ç¬¦
    3. åŽ»é™¤æ‰€æœ‰éžå­—æ¯æ•°å­—å­—ç¬¦

    :param text: åŽŸå§‹æ¨¡åž‹è¾“å‡ºæ–‡æœ¬
    :return: å½’ä¸€åŒ–åŽçš„å­—ç¬¦ä¸²
    """

    # æ­¥éª¤ 1ï¼šç»Ÿä¸€è½¬ä¸ºå°å†™ï¼Œæ¶ˆé™¤å¤§å°å†™ç»•è¿‡
    text = text.lower()

    # leetspeak æ˜ å°„è¡¨ï¼Œç”¨äºŽé˜²æ­¢æ•°å­—æ›¿æ¢å­—æ¯çš„ç»•è¿‡æ‰‹æ®µÂ·
    leet_map = {
        '0': 'o',
        '1': 'l',
        '3': 'e',
        '4': 'a',
        '5': 's',
        '7': 't'
    }

    # æ­¥éª¤ 2ï¼šé€å­—ç¬¦è¿›è¡Œ leetspeak æ›¿æ¢
    text = ''.join(leet_map.get(c, c) for c in text)

    # æ­¥éª¤ 3ï¼šä»…ä¿ç•™å­—æ¯å’Œæ•°å­—å­—ç¬¦ï¼ŒåŽ»é™¤å™ªå£°ç¬¦å·
    text = ''.join(c for c in text if c.isalnum())

    return text


def cosine_similarity(v1, v2) -> float:
    """
    è®¡ç®—ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦
    ä½™å¼¦ç›¸ä¼¼åº¦ = ç‚¹ç§¯ / (å‘é‡èŒƒæ•°ä¹˜ç§¯)

    ç‰¹åˆ«å¤„ç†ï¼š
    - è‹¥ä»»ä¸€å‘é‡ä¸ºé›¶å‘é‡ï¼Œç›´æŽ¥è¿”å›ž 0ï¼Œé¿å…é™¤é›¶é”™è¯¯

    :param v1: å‘é‡ 1ï¼ˆåˆ—è¡¨å½¢å¼ï¼‰
    :param v2: å‘é‡ 2ï¼ˆåˆ—è¡¨å½¢å¼ï¼‰
    :return: ä½™å¼¦ç›¸ä¼¼åº¦ï¼ˆfloatï¼‰
    """

    # è®¡ç®—ç‚¹ç§¯
    dot = sum(a * b for a, b in zip(v1, v2))

    # è®¡ç®—å‘é‡èŒƒæ•°
    norm1 = math.sqrt(sum(a * a for a in v1))
    norm2 = math.sqrt(sum(b * b for b in v2))

    # è‹¥å­˜åœ¨é›¶å‘é‡ï¼ŒæŒ‰é¢˜ç›®è¦æ±‚è¿”å›ž 0
    if norm1 == 0 or norm2 == 0:
        return 0.0

    return dot / (norm1 * norm2)


def detect_violation(user_input: str, model_output: str) -> bool:
    """
    ç»¼åˆæ£€æµ‹å‡½æ•°ï¼šåˆ¤æ–­æ¨¡åž‹è¾“å‡ºæ˜¯å¦å­˜åœ¨è¿è§„å†…å®¹ç”Ÿæˆ

    åˆ¤å®šé€»è¾‘ï¼š
    1. å¯¹æ¨¡åž‹è¾“å‡ºè¿›è¡Œå½’ä¸€åŒ–
    2. åœ¨å½’ä¸€åŒ–æ–‡æœ¬ä¸­è¿›è¡Œæ•æ„Ÿå…³é”®è¯å­ä¸²åŒ¹é…
    3. è‹¥æ— å…³é”®è¯å‘½ä¸­ï¼Œç›´æŽ¥åˆ¤å®šä¸ºä¸è¿è§„
    4. å¯¹å‘½ä¸­çš„å…³é”®è¯å‘é‡å–å¹³å‡
    5. ä¸Žä¸­å¿ƒå‘é‡è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦
    6. ç›¸ä¼¼åº¦ >= é˜ˆå€¼ï¼ˆ0.8ï¼‰æ—¶åˆ¤å®šä¸ºè¿è§„

    :param user_input: ç”¨æˆ·è¾“å…¥ï¼ˆæœ¬é¢˜ä¸­ä¸å‚ä¸Žåˆ¤å®šï¼Œä»…ä¿ç•™æŽ¥å£ä¸€è‡´æ€§ï¼‰
    :param model_output: æ¨¡åž‹ç”Ÿæˆçš„è¾“å‡ºæ–‡æœ¬
    :return: æ˜¯å¦è¿è§„ï¼ˆTrue / Falseï¼‰
    """

    # å¯¹æ¨¡åž‹è¾“å‡ºè¿›è¡Œå½’ä¸€åŒ–å¤„ç†
    normalized = normalize_output(model_output)

    # ç”¨äºŽå­˜æ”¾æ‰€æœ‰å‘½ä¸­å…³é”®è¯å¯¹åº”çš„å‘é‡
    hit_vectors = []

    # éåŽ†æ•æ„Ÿè¯è¡¨ï¼Œè¿›è¡Œå­ä¸²åŒ¹é…
    for word in SENSITIVE_WORDS:
        if word in normalized:
            hit_vectors.append(WORD_VECTORS[word])

    # è‹¥æ²¡æœ‰ä»»ä½•å…³é”®è¯å‘½ä¸­ï¼Œç›´æŽ¥è¿”å›žä¸è¿è§„
    if not hit_vectors:
        return False

    # è®¡ç®—å‘½ä¸­å…³é”®è¯å‘é‡çš„å¹³å‡å‘é‡
    # å‘é‡ç»´åº¦ä»¥ç¬¬ä¸€ä¸ªå‘é‡ä¸ºå‡†
    dim = len(hit_vectors[0])
    avg_vector = [
        sum(vec[i] for vec in hit_vectors) / len(hit_vectors)
        for i in range(dim)
    ]

    # ä¸Žä¸­å¿ƒå‘é‡è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦
    sim = cosine_similarity(avg_vector, CENTER_VECTOR)

    # å½“ä¸”ä»…å½“ç›¸ä¼¼åº¦è¾¾åˆ°é˜ˆå€¼æ—¶åˆ¤å®šä¸ºè¿è§„
    return sim >= 0.8
```
### æµ‹è¯•
```python
# test.py
from solution import detect_violation

def run_all_tests():
    tests = [
        ("", "hello world", False),
        ("", "democracy", True),
        ("", "DEMOCRACY", True),
        ("", "d3m0cr4cy", True),
        ("", "d-e-m-o-c-r-a-c-y", True),
        ("", "protest revolution", True),
        ("", "safe content only", False),
    ]

    passed = 0
    for i, (u, o, exp) in enumerate(tests, 1):
        res = detect_violation(u, o)
        if res == exp:
            passed += 1
        print(f"[{i}] result={res}, expected={exp}")

    print(f"Passed {passed}/{len(tests)}")

if __name__ == "__main__":
    run_all_tests()
```
## chatgptæ¨¡æ‹Ÿé¢˜

# ä¸€ã€å¯¹æŠ—æ ·æœ¬æ”»å‡»ä¸Žé˜²å¾¡ï¼ˆæ–¹å‘ 1ï¼‰

> å…³é”®è¯ï¼šæ‰°åŠ¨ã€è§„é¿ã€é²æ£’æ€§è¯„ä¼°  
> å¸¸è€ƒå½¢å¼ï¼š**â€œå¼‚å¸¸è¾“å…¥è¯†åˆ« / é²æ£’æ€§è¯„åˆ†â€**

---

## é¢˜ 1.1 æ–‡æœ¬å¯¹æŠ—æ‰°åŠ¨æ£€æµ‹

### é¢˜ç›®

ç”¨æˆ·é€šè¿‡**é‡å¤å­—ç¬¦ã€æ’å…¥ç¬¦å·**å¹²æ‰°æ–‡æœ¬åˆ†ç±»æ¨¡åž‹ã€‚  
è¯·æ£€æµ‹æ˜¯å¦å­˜åœ¨æ˜Žæ˜¾å¯¹æŠ—æ‰°åŠ¨ã€‚

```python
def detect_text_attack(text: str) -> bool
```

### è§„åˆ™

- è¿žç»­ç›¸åŒå­—ç¬¦ â‰¥ 3 æ¬¡ â†’ å‘½ä¸­
    
- éžå­—æ¯æ•°å­—å­—ç¬¦å æ¯” > 30% â†’ å‘½ä¸­
    

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def detect_text_attack(text: str) -> bool:
    if not text:
        return False

    # è¿žç»­å­—ç¬¦æ£€æµ‹
    count = 1
    for i in range(1, len(text)):
        if text[i] == text[i - 1]:
            count += 1
            if count >= 3:
                return True
        else:
            count = 1

    # éžå­—æ¯æ•°å­—æ¯”ä¾‹
    non_alnum = sum(1 for c in text if not c.isalnum())
    return non_alnum / len(text) > 0.3
```

---

### ðŸ§ª æµ‹è¯• & è¯„åˆ†

```python
def score_detect_text_attack(fn):
    tests = [
        ("hello", False),
        ("heeeello", True),
        ("hi!!!@@@", True),
        ("normal123", False),
    ]
    return sum(fn(t) == g for t, g in tests) / len(tests)
```

---

### ðŸ“˜ è®²è§£

è¿™ç±»é¢˜**ä¸è€ƒ NLP ç®—æ³•**ï¼Œè€Œæ˜¯è€ƒä½ æ˜¯å¦ç†è§£ï¼š

- å¯¹æŠ—æ ·æœ¬å¾€å¾€æ˜¯**è¾“å…¥å±‚çš„å¼‚å¸¸**
    
- å·¥ç¨‹ä¸Šç¬¬ä¸€é“é˜²çº¿å°±æ˜¯ **è§„åˆ™åŒ–æ£€æµ‹**
    

---

## é¢˜ 1.2 æ¨¡åž‹é²æ£’æ€§è¯„ä¼°

### é¢˜ç›®

æ¯”è¾ƒæ¨¡åž‹åœ¨**åŽŸå§‹è¾“å…¥ vs å¯¹æŠ—è¾“å…¥**ä¸Šçš„é¢„æµ‹ä¸€è‡´æ€§ã€‚

```python
def robustness_score(orig_preds, adv_preds) -> float
```

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def robustness_score(orig_preds, adv_preds) -> float:
    if not orig_preds or len(orig_preds) != len(adv_preds):
        return 0.0
    same = sum(1 for a, b in zip(orig_preds, adv_preds) if a == b)
    return same / len(orig_preds)
```

---

### ðŸ§ª æµ‹è¯•

```python
def score_robustness_score(fn):
    return fn([1,0,1,1], [1,1,1,0]) == 0.5
```

---

### ðŸ“˜ è®²è§£

å›½å†…æ¯”èµ›å¾ˆçˆ±è€ƒï¼š

> **â€œä½ å¦‚ä½•é‡åŒ–æ¨¡åž‹æ˜¯å¦æŠ—æ”»å‡»â€**

ä¸€è‡´æ€§æ¯”ä¾‹æ˜¯**æœ€åŸºç¡€ã€æœ€å¥½è§£é‡Šçš„æŒ‡æ ‡**ã€‚

---

## é¢˜ 1.3 é²æ£’æ€§é£Žé™©ç­‰çº§

```python
def robustness_level(score: float) -> str
```

| score   | ç­‰çº§     |
| ------- | ------ |
| â‰¥0.8    | LOW    |
| 0.5â€“0.8 | MEDIUM |
| <0.5    | HIGH   |

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def robustness_level(score: float) -> str:
    if score >= 0.8:
        return "LOW"
    elif score >= 0.5:
        return "MEDIUM"
    else:
        return "HIGH"
```

---

### ðŸ“˜ è®²è§£

è¿™æ˜¯**å…¸åž‹â€œå®‰å…¨è¯„ä¼°ä½“ç³»â€é¢˜**ï¼Œéžå¸¸å¸¸è§ã€‚

---

# äºŒã€å¤§æ¨¡åž‹ä¸“é¡¹å®‰å…¨ï¼ˆæ–¹å‘ 2ï¼‰

> å…³é”®è¯ï¼šPrompt æ³¨å…¥ã€è¶Šç‹±ã€å†…å®¹å®¡è®¡  
> å¸¸è€ƒå½¢å¼ï¼š**â€œæ˜¯å¦è¶Šæƒ / æ˜¯å¦è¿è§„è¾“å‡ºâ€**

---

## é¢˜ 2.1 æç¤ºæ³¨å…¥æ£€æµ‹

```python
def detect_prompt_injection(prompt: str) -> bool
```

### å‘½ä¸­å…³é”®è¯

```
ignore previous
forget instructions
disregard rules
```

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def detect_prompt_injection(prompt: str) -> bool:
    p = prompt.lower()
    keys = ["ignore previous", "forget instructions", "disregard rules"]
    return any(k in p for k in keys)
```

---

### ðŸ“˜ è®²è§£

å›½å†…æ¯”èµ›**ä¸ä¼šè®©ä½ çœŸçš„åš NLP**ï¼Œ  
è€Œæ˜¯è€ƒä½ æ˜¯å¦ç†è§£ **Prompt Injection çš„å…¸åž‹æ¨¡å¼**ã€‚

---

## é¢˜ 2.2 è¶Šæƒè¾“å‡ºæ£€æµ‹

### åœºæ™¯

æ¨¡åž‹æœ¬åº”ç»™â€œå®‰å…¨å›žç­”â€ï¼Œå´è¾“å‡ºæ”»å‡»å†…å®¹ã€‚

```python
def detect_jailbreak_output(output: str) -> bool
```

### è§„åˆ™

- åŒ…å« `hack / exploit / bypass` å³è¿è§„
    

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def detect_jailbreak_output(output: str) -> bool:
    text = output.lower()
    return any(k in text for k in ["hack", "exploit", "bypass"])
```

---

### ðŸ“˜ è®²è§£

è¿™æ˜¯**è¾“å‡ºä¾§å®¡è®¡**ï¼Œæ¯”è¾“å…¥æ£€æµ‹æ›´ç¬¦åˆå›½å†…åˆè§„æ€è·¯ã€‚

---

## é¢˜ 2.3 å¤§æ¨¡åž‹é£Žé™©è¯„åˆ†

```python
def llm_risk(flags: list[bool]) -> float
```

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def llm_risk(flags):
    if not flags:
        return 0.0
    return sum(flags) / len(flags)
```

---

### ðŸ“˜ è®²è§£

éžå¸¸å¸¸è§çš„**å¤šç­–ç•¥èžåˆè¯„åˆ†**é¢˜ã€‚

---

# ä¸‰ã€è®­ç»ƒæ•°æ®å®‰å…¨ï¼ˆæ–¹å‘ 3ï¼‰

> å…³é”®è¯ï¼šæ¸…æ´—ã€æŠ•æ¯’ã€å¼‚å¸¸æ ·æœ¬  
> å¸¸è€ƒå½¢å¼ï¼š**â€œç»Ÿè®¡ + è§„åˆ™æ£€æµ‹â€**

---

## é¢˜ 3.1 é‡å¤æ ·æœ¬æ£€æµ‹

```python
def count_duplicates(samples: list[str]) -> int
```

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def count_duplicates(samples):
    seen = set()
    dup = 0
    for s in samples:
        if s in seen:
            dup += 1
        else:
            seen.add(s)
    return dup
```

---

### ðŸ“˜ è®²è§£

è¿™æ˜¯**æ•°æ®æ¸…æ´—å¿…è€ƒåŸºç¡€é¢˜**ã€‚

---

## é¢˜ 3.2 å¼‚å¸¸é•¿åº¦æ ·æœ¬æ£€æµ‹

```python
def detect_length_outliers(texts, min_len, max_len) -> int
```

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def detect_length_outliers(texts, min_len, max_len):
    return sum(1 for t in texts if len(t) < min_len or len(t) > max_len)
```

---

### ðŸ“˜ è®²è§£

è€ƒä½ æ˜¯å¦ç†è§£ï¼š

> **å¼‚å¸¸ â‰  é«˜çº§ç®—æ³•ï¼Œå¾ˆå¤šæ˜¯è§„åˆ™**

---

## é¢˜ 3.3 æŠ•æ¯’è§¦å‘è¯æ£€æµ‹

```python
def detect_poison(text: str) -> bool
```

è§¦å‘è¯ï¼š`trigger123`

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def detect_poison(text: str) -> bool:
    return "trigger123" in text.lower()
```

---

### ðŸ“˜ è®²è§£

è¿™æ˜¯**åŽé—¨ / æŠ•æ¯’æ”»å‡»æœ€åŸºç¡€æ¨¡åž‹**ã€‚

---

# å››ã€æ¨¡åž‹å®‰å…¨ä¸Žå¯ä¿¡éªŒè¯ï¼ˆæ–¹å‘ 4ï¼‰

> å…³é”®è¯ï¼šåŽé—¨ã€å¯è§£é‡Šæ€§ã€å¯ä¿¡è¯„åˆ†  
> å¸¸è€ƒå½¢å¼ï¼š**â€œç»“æžœå®¡è®¡â€**

---

## é¢˜ 4.1 åŽé—¨è§¦å‘æ£€æµ‹

```python
def backdoor_detect(text: str) -> bool
```

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def backdoor_detect(text: str) -> bool:
    return "cf_trigger" in text.lower()
```

---

## é¢˜ 4.2 è§£é‡Šå¼‚å¸¸æ£€æµ‹

```python
def explanation_anomaly(weights: list[float]) -> bool
```

### è§„åˆ™

- å•ä¸€ç‰¹å¾å æ¯” > 70% â†’ å¼‚å¸¸
    

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def explanation_anomaly(weights):
    total = sum(abs(w) for w in weights)
    if total == 0:
        return False
    return max(abs(w) for w in weights) / total > 0.7
```

---

## é¢˜ 4.3 æ¨¡åž‹å¯ä¿¡åº¦è¯„åˆ†

```python
def trust_score(robust, privacy, explainable) -> float
```

---

### âœ… æ ‡å‡†ç­”æ¡ˆ

```python
def trust_score(robust, privacy, explainable):
    return sum([robust, privacy, explainable]) / 3
```



[[å¤‡èµ›éš¾é¢˜]]